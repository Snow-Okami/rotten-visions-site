<div class="content-wrapper">
  <div [ngClass]="{'body': true, 'mobile': mobileQuery.matches}">

    <!-- Create Post Button -->
    <button *ngIf="createButton" (click)="visitCreate()" mat-fab class="b-r-btn" matTooltip="Create New" matTooltipPosition="before">
      <mat-icon aria-label="Create new post icon">add</mat-icon>
    </button>

    <!-- LATEST POSTS APPEARS HERE -->
    <div class="row">
      <div class="col w70">
        <div class="update-tab"> POPULAR UPDATES </div>
        <mat-divider></mat-divider>

        <!-- Repeat should be here -->
        <ul>
          <li class="row pg-bg" *ngIf="!recent.length">
            <div class="col w100">
              <p class="t-al-center"> {{updateText}} </p>
            </div>
          </li>
        </ul>

        <ul class="row slider">
          <li class="col inline" *ngFor="let update of [1, 2, 3]">
            <img alt="missing image!" [ngClass]="{'post-image': true}"
              [defaultImage]="image.defaultImage"
              [lazyLoad]="'https://res.cloudinary.com/imagebag/image/upload/v1571998577/v4qn0sfiywon8tugj63k.jpg'"
              [offset]="image.offset"
              [style.height.px]="200"
            >
          </li>
        </ul>

      </div>
    </div>

    <!-- ALL POSTS APPEARS HERE -->
    <div class="row">
      <div class="col w70">
        <div class="update-tab"> ALL UPDATES </div>
        <mat-divider></mat-divider>

        <!-- Repeat should be here -->
        <ul [@openClose]="updates.length ? 'closed' : 'open'">
          <li class="row pg-bg">
            <div class="col w100">
              <p class="t-al-center"> {{updateText}} </p>
            </div>
          </li>
        </ul>

        <ul [@openClose]="!updates.length ? 'closed' : 'open'">
          <li class="row" *ngFor="let update of updates">

            <div class="update-con-wrapper">
              <!-- Keep the image in here -->
              <div class="col w40" *ngIf="update.image !== ''" (click)="viewThisUpdate(update.id);">
                <div class="row">
                  <img alt="missing post images!" [ngClass]="{'post-image': true}"
                    [defaultImage]="image.defaultImage"
                    [lazyLoad]="update.image"
                    [offset]="image.offset"
                    [style.height.px]="imgHeight"
                  >
                </div>
              </div>

              <!-- Keep the description in here -->
              <div [ngClass]="{'w60': update.image !== '', 'w100': update.image == '', 'col': true}">
                <div [ngClass]="{'m-l-20': update.image !== '', 'pos-r': true, 'o-flow-hidden': true}" [style.height.px]="imgHeight">

                  <div class="pos-a right-0px" *ngIf="createButton">
                    <button mat-icon-button color="primary" matTooltip="Edit post" matTooltipPosition="before" aria-label="icon-button with a settings icon" (click)="editThisUpdate(update.id);">
                      <mat-icon>edit</mat-icon>
                    </button>
                  </div>

                  <!-- POST TAGS Should Stay Here -->
                  <div class="row" *ngIf="update.tags.length > 0">
                    <ul class="post-tag m-r-40">
                      <li *ngFor="let item of update.tags"> {{item}} </li>
                    </ul>
                  </div>

                  <!-- POST TITLE Should Stay Here -->
                  <div class="row" (click)="viewThisUpdate(update.id);">
                    <p class="title"> {{ update.title | trimword: 20 }} </p>
                  </div>

                  <!-- POST DESCRIPTION Should Stay Here -->
                  <div class="row" (click)="viewThisUpdate(update.id);">
                    <span [innerHTML]="fixPostLen(update?.description, 150)" class="writable-update"></span>
                  </div>

                </div>
              </div>
            </div>

            <!-- Divider Appears Here -->
            <div class="row">
              <mat-divider></mat-divider>
            </div>
          </li>
        </ul>
        <div class="row" #fixedBottom></div>
        <div class="row" #loadScroll>
          <mat-progress-bar mode="indeterminate" *ngIf="loadingBar"></mat-progress-bar>
        </div>
      </div>
    </div>

  </div>
</div>
