<div class="container">

  <div [ngClass]="{'mobile': mobileQuery.matches, 'body': true}">

    <div class="col w60 m-b-30" [ngClass]="{'mobile': mobileQuery.matches}">

      <div class="image-wrapper" [ngClass]="{'p-15': !mobileQuery.matches}">
        <div class="row">
  
          <div [ngClass]="{'mobile': mobileQuery.matches, 'col': true, 'w100': true}">
    
            <div class="">
  
              <div class="image-title  p-b-10">
              
                <div class="row">
                  <div class="title"> {{post.title}} </div>
                </div>
                <div class="date p-b-10 p-t-10"> Posted on: {{post.createdAt | date}} </div>
                <div class="tag p-b-10 p-t-10">
                  <div class="col inline tag-item" *ngFor="let t of post.tags"> {{t}} </div>
                </div>
    
              </div>

              <img [ngClass]="{'mobile': mobileQuery.matches, 'post-image': true}"
              [defaultImage]="image.defaultImage"
              [lazyLoad]="post.image"
              [offset]="image.offset"
              alt="missing image">
            
            </div>
    
          </div>
    
        </div>
    
        <!-- <div class="row">
          
          <div [ngClass]="{'mobile': mobileQuery.matches, 'col': true, 'w100': true}">
    
            <div class="">
    
    
            </div>
    
          </div>
    
        </div> -->
      </div>

      <div class="desc-wrapper" [ngClass]="{'p-15': !mobileQuery.matches}">
        <div class="row">

          <div [ngClass]="{'mobile': mobileQuery.matches, 'col': true, 'w100': true}">
            <span [innerHTML]="sanitizer.bypassSecurityTrustHtml(post.description)" class="writable-update"></span>
          </div>

        </div>
      </div>

      <!-- Started working on comments section -->
      <div class="comment-wrapper" [ngClass]="{'p-15': !mobileQuery.matches}">

        <div class="row">

          <div [ngClass]="{'mobile': mobileQuery.matches, 'col': true, 'w100': true}">
            
            <div class="comment-title">Comments:</div>

            <ul class="default">
              <li class="comment-box p-b-10 p-t-10" *ngFor="let com of post.comments; index as i;">

                <div class="comment-wrapper">
                  <div class="user-title p-b-5 p-t-5"> {{com.createdBy}} </div>
                  <div class="comment-time p-b-5 p-t-5"> {{com.createdAt | date: 'fullDate'}} </div>
                  <div class="user-comment p-b-5 p-t-5"> {{com.text}} </div>
                </div>

                <ul class="default">
                  <li class="p-b-10 p-t-10">
                    <form class="comment-form">

                      <mat-form-field class="contact-input textarea">
                        <span matPrefix>+1 &nbsp;</span>
                        <textarea matInput [matTextareaAutosize]="true" [matAutosizeMaxRows]="10" minlength="100" placeholder="Leave your comment" required></textarea>
                        <mat-icon matSuffix>mode_edit</mat-icon>
                      </mat-form-field>
                      
                    </form>
                  </li>

                  <li class="reply-box p-b-10 p-t-10" *ngFor="let reply of com.replies; index as ri;">

                    <div class="col inline p-t-10 p-r-10">
                      <img src="../../../assets/icon/reply.png" alt="missing logo" class="reply-icon">
                    </div>

                    <div class="col inline">
                      <div class="reply-wrapper">
                        <div class="user-title p-b-5 p-t-5"> {{reply.createdBy}} </div>
                        <div class="comment-time p-b-5 p-t-5"> {{reply.createdAt | date: 'fullDate'}} </div>
                        <div class="user-comment p-b-5 p-t-5"> {{reply.text}} </div>
                      </div>
                    </div>

                  </li>
                </ul>
                <div class="row">
                  <mat-divider></mat-divider>
                </div>
              </li>
            </ul>

          </div>

        </div>

      </div>

    </div>

    <div class="col w40" [ngClass]="{'mobile': mobileQuery.matches}">
      <div class="newsletter-wrapper" [ngClass]="{'p-15 m-l-30': !mobileQuery.matches}">

        <mat-card>
          <mat-card-title> Subscribe to the best creative feed. </mat-card-title>
          
          <mat-card-content>

            <form class="newsletterform" [formGroup]="newsletterform" (submit)="submit($event, newsletterform);">
              <div class="row">
                <mat-form-field class="contact-input">
                  <input matInput placeholder="Email address" formControlName="email" required>
                  <mat-error *ngIf="newsletterform.controls.email.hasError('pattern')">
                    Please enter a valid email
                  </mat-error>
                  <mat-error *ngIf="newsletterform.controls.email.hasError('required')">
                    Name is required
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="row">
                <button mat-raised-button type="submit">
                  <i class="material-icons send"> send </i>
                </button>
              </div>
            </form>

          </mat-card-content>

        </mat-card>

      </div>

      <div class="more-update-wrapper" [ngClass]="{'m-l-30': !mobileQuery.matches}" *ngIf="!mobileQuery.matches">
        <ul class="default">

          <li *ngFor="let p of postList; index as i;" [routerLink]="['/updates/view/' + p.id]" class="link-sm">
            <div class="row">
              <div class="col w100">
                <div class="wrapper">
                  <div class="row">
                    <p class="col title-sm"> {{p.title}} </p>
                  </div>
                  <div class="row">
                    <span [innerHTML]="sanitizer.bypassSecurityTrustHtml(p.description)" class="writable-update-sm"></span>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <mat-divider></mat-divider>
            </div>
          </li>

        </ul>
      </div>
    </div>

  </div>

</div>