<div class="content-wrapper">
  <div class="body">

    <!-- Messages Card Starts Here -->
    <mat-card>

      <!-- Messages Title Bar Starts Here -->
      <div class="row">

        <!-- Back Button Appears Here -->
        <div class="col w20"></div> <div class="col w2"> </div> <div class="col w2"></div>

        <!-- Message Title Will Appear Here -->
        <div class="col w70 t-al-center card-title">
          <mat-icon matPrefix class="title-item"> chat </mat-icon>
          <h4 class="title-item m-l-5" [ngClass]="{ 'hidden': !chatView }"> Messages - {{ recipients | nameonly: user }} </h4>

          <!-- User's own name appears when no chat selected. -->
          <h4 class="title-item m-l-5" [ngClass]="{ 'hidden': chatView }"> Welcome {{ user.firstName }}! </h4>
        </div>
        
        <!-- Empty Row For Matching Template -->
        <!-- <div class="col w33 t-al-right"></div> -->
      </div>

      <!-- Chat List Wrapper Starts Here -->
      <div class="row">
        <div class="col w20">

          <perfect-scrollbar #chatList style="position: relative; max-width: 230px; max-height: 414px; min-height: 414px;" [config]="config" (psYReachEnd)="onScrollEvent($event)" (psYReachStart)="onScrollEvent($event)"> 
            <mat-list>
              <mat-list-item *ngFor="let c of chats" matRipple [matRippleRadius]="40" [matRippleUnbounded]="false" (click)="showItsMessages(c)">
                <mat-icon mat-list-icon> person </mat-icon>
                <h4 mat-line> {{ c.type ? c.fullName : c.users | nameonly: user }} </h4>
                <p mat-line> {{ c.lastMessage.text }} </p>
                <mat-divider></mat-divider>
              </mat-list-item>
            </mat-list>
          </perfect-scrollbar>

        </div>

        <div class="col w2"> <mat-divider style="max-height: 414px; min-height: 414px;" [vertical]="true"></mat-divider> </div>

        <div class="col w2"> </div>

        <div class="col w70" [ngClass]="{ 'hidden': !chatView }">

          <perfect-scrollbar #messageList style="position: relative; max-width: 750px; max-height: 336px; min-height: 336px;" [config]="config" (psYReachEnd)="onScrollEvent($event)" (psYReachStart)="onScrollEvent($event)">
            <mat-list>

              <ul>

                <!-- *ngFor="let note of notes" -->
                <li *ngFor="let m of messages" class="row chat-row-wrapper">
                  <div class="chat-wrapper right m-l-30">
                    <div class="t-al-center chat-image"><mat-icon mat-list-icon> person </mat-icon></div>

                    <div class="col wauto">
                      <p> {{ m.text }} </p>
                      <h4 class="mat-line"> {{ recipients | nameonly: user }} </h4>
                    </div>
                  </div>
                </li>

                <li class="row chat-row-wrapper">
                  <div class="chat-wrapper m-r-30">
                    <div class="t-al-center chat-image"><mat-icon mat-list-icon> person </mat-icon></div>
                    
                    <div class="col wauto">
                      <p> The point of using Lorem Ipsum is that ... </p>
                      <h4 class="mat-line"> Abhisek Dutta </h4>
                    </div>
                  </div>
                </li>

              </ul>

            </mat-list>
          </perfect-scrollbar>

          <!-- Input Section Will Be Used For Message -->
          <div class="row" style="max-width: 750px;">
            <mat-card class="chat-input-wrapper">
              <mat-card-content>

                <div class="col w90">
                  <mat-form-field>
                    <textarea matInput #message matTextareaAutosize placeholder="Say something..."></textarea>
                  </mat-form-field>
                </div>

                <div class="col w10"></div>
              </mat-card-content>
            </mat-card>

          </div>

        </div>

      </div>

    </mat-card>
    <!-- Messages Card Ends Here -->

  </div>
</div>
